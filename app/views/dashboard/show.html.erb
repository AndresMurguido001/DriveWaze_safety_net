


<h1>Directions to your parking spot</h1>

<div id="showMap" style="height: 500px">

</div>
<%= @spot_ids %>

<script type="text/javascript">
var showLat;
var directions = document.getElementById("Directions")


function initMap() {

  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }

function showPosition(position) {
  showLat = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

  var options = {
    zoom: 10,
    center: showLat
  }
  var map3 = new google.maps.Map(document.getElementById('showMap'), options)
  // new google.maps.Marker({
  //         map: map3,
  //         position: showLat
  //       })
  //     }
directionsDisplay.setMap(map3);
calculateAndDisplayRoute(directionsService, directionsDisplay);
  }
}
function calculateAndDisplayRoute(directionsService, directionsDisplay) {
  directionsService.route({
    origin: showLat,//document.getElementById('start').value,
    destination: gon.current_street,//document.getElementById('end').value,
    travelMode: 'DRIVING'
  }, function(response, status) {
    if (status === 'OK') {
      directionsDisplay.setDirections(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
//    49 sw 11th st
// function initMap() {
//   getLocation();
//   var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
//    var directionsService = new google.maps.DirectionsService;
//    var directionsDisplay = new google.maps.DirectionsRenderer;
//    var map3 = new google.maps.Map(document.getElementById('showMap'), {
//      zoom: 7,
//      center: showLat
//    });
  // directionsDisplay.setMap(map3);

   //calculateAndDisplayRoute(directionsService, directionsDisplay);

 // }

 // function calculateAndDisplayRoute(directionsService, directionsDisplay) {
 //   directionsService.route({
 //     origin: gon.start_address,//document.getElementById('start').value,
 //     destination: gon.end_address,//document.getElementById('end').value,
 //     travelMode: 'DRIVING'
 //   }, function(response, status) {
 //     if (status === 'OK') {
 //       directionsDisplay.setDirections(response);
 //     } else {
 //       window.alert('Directions request failed due to ' + status);
 //     }
 //   });
 // }


initMap();
</script>
